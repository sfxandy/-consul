1. Basic Deployment

    GIVEN a Podman environment with at least 3 hosts available
    AND the latest Consul container image is accessible
    WHEN the deployment automation (script, Ansible, etc.) is executed
    THEN a 3-node Consul server cluster is started, with each node running as a Podman container on a separate host

2. Cluster Health Verification

    GIVEN the Consul containers are running
    WHEN the consul members command is executed on any node
    THEN all 3 nodes report as healthy, in the “server” role, and part of the same cluster

3. Data Persistence

    GIVEN Consul containers are configured with mapped volumes for data
    WHEN a container is stopped and restarted
    THEN its data and cluster state are preserved (no data loss, no rejoining as a new node)

4. Port and Network Accessibility

    GIVEN the cluster is running
    WHEN a request is sent to the Consul HTTP API (/v1/status/leader) from any host on the network
    THEN the API responds with the current cluster leader’s address

5. Security (Optional/Advanced)

    GIVEN Consul is started with ACLs and TLS enabled
    WHEN an unauthorized or non-TLS request is made to the API
    THEN the request is rejected with an appropriate error

6. Idempotent Re-deployment

    GIVEN the deployment automation is run a second time
    WHEN no configuration has changed
    THEN no new containers are created, existing ones are verified as healthy, and cluster state is maintained

7. Log and Monitoring Integration

    GIVEN the containers are running
    WHEN logs are collected from the Consul containers
    THEN log messages are available for health, cluster join/leave, and error events, and can be accessed via the centralized logging solution
